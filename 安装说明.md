# PO-workflow å®‰è£…è¯´æ˜

## ç³»ç»Ÿè¦æ±‚

- Windows 10/11 (64ä½)
- Node.js 14.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- è‡³å°‘ 2GB å¯ç”¨ç£ç›˜ç©ºé—´
- ç½‘ç»œè¿æ¥ï¼ˆç”¨äºå®‰è£…ä¾èµ–ï¼‰

---

## ğŸ“¦ å¿«é€Ÿå®‰è£…æ­¥éª¤

### 1. è§£å‹æ–‡ä»¶
å°† `PO-workflow-package.zip` è§£å‹åˆ°ä½ æƒ³è¦çš„ç›®å½•ï¼Œä¾‹å¦‚ï¼š
```
D:\PO-workflow
```

### 2. æ£€æŸ¥ Node.js
æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼ˆCMDï¼‰æˆ– PowerShellï¼Œè¿è¡Œï¼š
```bash
node --version
npm --version
```

å¦‚æœæœªå®‰è£…ï¼Œè¯·è®¿é—®ï¼šhttps://nodejs.org/zh-cn/download/
ä¸‹è½½å¹¶å®‰è£… LTS ç‰ˆæœ¬ã€‚

### 3. å®‰è£…ä¾èµ–

#### æ–¹æ³•1ï¼šä½¿ç”¨è‡ªåŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

**Windows PowerShellï¼ˆæ¨èï¼‰ï¼š**
```powershell
.\quick-start.ps1
```

**Windows æ‰¹å¤„ç†ï¼š**
åŒå‡»è¿è¡Œ `quick-start.bat`

#### æ–¹æ³•2ï¼šæ‰‹åŠ¨å®‰è£…
```bash
# å®‰è£…åç«¯ä¾èµ–
cd server
npm install

# å®‰è£…å‰ç«¯ä¾èµ–
cd ..\client
npm install

# å®‰è£… Playwright æµè§ˆå™¨
cd ..\server
npx playwright install chromium

# è¿”å›æ ¹ç›®å½•
cd ..
```

### 4. é…ç½®ç¯å¢ƒå˜é‡

#### æ­¥éª¤ 4.1ï¼šåˆ›å»ºé…ç½®æ–‡ä»¶
```bash
cd server
copy .env.example .env
```

#### æ­¥éª¤ 4.2ï¼šç¼–è¾‘é…ç½®æ–‡ä»¶
ç”¨è®°äº‹æœ¬æ‰“å¼€ `server\.env` æ–‡ä»¶ï¼š
```bash
notepad .env
```

#### æ­¥éª¤ 4.3ï¼šå¡«å†™å¿…è¦ä¿¡æ¯
```env
# OpenAI API Configuration
OPENAI_API_KEY=ä½ çš„OpenAI APIå¯†é’¥

# Application Settings
PORT=3001
NODE_ENV=development

# Procore Login Credentials
PROCORE_EMAIL=ä½ çš„Procoreé‚®ç®±
PROCORE_PASSWORD=ä½ çš„Procoreå¯†ç 
```

**è·å– OpenAI API Keyï¼š**
1. è®¿é—® https://platform.openai.com/api-keys
2. ç™»å½•ä½ çš„ OpenAI è´¦æˆ·
3. ç‚¹å‡» "Create new secret key"
4. å¤åˆ¶ç”Ÿæˆçš„ API Keyï¼ˆæ ¼å¼ï¼šsk-proj-xxxx...ï¼‰

### 5. å¯åŠ¨åº”ç”¨

#### æ–¹æ³•1ï¼šä½¿ç”¨è„šæœ¬å¯åŠ¨
```bash
.\quick-start.ps1
```
æˆ–åŒå‡» `quick-start.bat`

#### æ–¹æ³•2ï¼šæ‰‹åŠ¨å¯åŠ¨

**å¯åŠ¨åç«¯ï¼ˆåœ¨ä¸€ä¸ªå‘½ä»¤è¡Œçª—å£ï¼‰ï¼š**
```bash
cd server
npm start
```

**å¯åŠ¨å‰ç«¯ï¼ˆåœ¨å¦ä¸€ä¸ªå‘½ä»¤è¡Œçª—å£ï¼‰ï¼š**
```bash
cd client
npm start
```

### 6. è®¿é—®åº”ç”¨
æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š
```
http://localhost:3000
```

---

## ğŸ”§ é¦–æ¬¡ä½¿ç”¨é…ç½®

### åœ¨Webç•Œé¢é…ç½®ï¼ˆæ¨èï¼‰

1. è®¿é—® http://localhost:3000
2. ç‚¹å‡»å³ä¸Šè§’ "è®¾ç½®" æŒ‰é’®
3. å¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š
   - **OpenAI API Key**ï¼šä½ çš„ OpenAI API å¯†é’¥
   - **Procore Email**ï¼šä½ çš„ Procore è´¦æˆ·é‚®ç®±
   - **Procore Password**ï¼šä½ çš„ Procore è´¦æˆ·å¯†ç 
4. ç‚¹å‡» "Test API Key" æµ‹è¯• API Key æ˜¯å¦æœ‰æ•ˆ
5. ç‚¹å‡» "ä¿å­˜è®¾ç½®"

---

## ğŸ“ åŠŸèƒ½è¯´æ˜

### 1. ä¸Šä¼ å‘ç¥¨
- æ”¯æŒ PDF å’Œå›¾ç‰‡æ ¼å¼ï¼ˆJPG, PNGï¼‰
- å¯æ‰¹é‡ä¸Šä¼ å¤šä¸ªæ–‡ä»¶
- å•ä¸ªæ–‡ä»¶æœ€å¤§ 10MB

### 2. AI è¯†åˆ«
- è‡ªåŠ¨è¯†åˆ«å‘ç¥¨å·ï¼ˆInvoice Numberï¼‰
- è‡ªåŠ¨è¯†åˆ«è®¢å•å·ï¼ˆClient Order Number / PO Numberï¼‰
- è‡ªåŠ¨è¯†åˆ«é‡‘é¢ï¼ˆTotal Amountï¼‰

### 3. Procore è‡ªåŠ¨åŒ–
- è‡ªåŠ¨ç™»å½• Procore ç³»ç»Ÿ
- è‡ªåŠ¨å¡«å†™è¡¨å•
- è‡ªåŠ¨ä¸Šä¼ å‘ç¥¨é™„ä»¶
- æä¾›å®æ—¶æ—¥å¿—åé¦ˆ

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: ç«¯å£è¢«å ç”¨ï¼Ÿ
**é”™è¯¯ä¿¡æ¯ï¼š** `EADDRINUSE: address already in use :::3001`

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
netstat -ano | findstr :3001
netstat -ano | findstr :3000

# ç»“æŸè¿›ç¨‹ï¼ˆæ›¿æ¢ PID ä¸ºå®é™…è¿›ç¨‹IDï¼‰
taskkill //F //PID <è¿›ç¨‹ID>
```

### Q2: npm install å¤±è´¥ï¼Ÿ
**è§£å†³æ–¹æ¡ˆï¼š**
1. æ¸…ç† npm ç¼“å­˜ï¼š
   ```bash
   npm cache clean --force
   ```
2. åˆ é™¤ `node_modules` å’Œ `package-lock.json`
3. é‡æ–°è¿è¡Œ `npm install`

### Q3: OpenAI API é”™è¯¯ 401ï¼Ÿ
**å¯èƒ½åŸå› ï¼š**
- API Key æ ¼å¼ä¸æ­£ç¡®
- API Key å·²è¿‡æœŸæˆ–æ— æ•ˆ
- è´¦æˆ·ä½™é¢ä¸è¶³

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥ API Key æ˜¯å¦å®Œæ•´
2. è®¿é—® https://platform.openai.com/api-keys ç”Ÿæˆæ–°çš„ Key
3. æ£€æŸ¥è´¦æˆ·ä½™é¢ï¼šhttps://platform.openai.com/usage

### Q4: Chromium æµè§ˆå™¨æœªå®‰è£…ï¼Ÿ
**é”™è¯¯ä¿¡æ¯ï¼š** `Executable doesn't exist at ...chromium...\chrome.exe`

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
cd server
npx playwright install chromium
```

### Q5: pdf-parse é”™è¯¯ï¼Ÿ
**é”™è¯¯ä¿¡æ¯ï¼š** `ENOENT: no such file or directory, open '...05-versions-space.pdf'`

è¿™æ˜¯ä¸€ä¸ªå·²çŸ¥é—®é¢˜ï¼Œæˆ‘ä»¬å·²ç»ä¿®å¤ã€‚å¦‚æœä»ç„¶å‡ºç°ï¼š
1. ç¼–è¾‘ `server\node_modules\pdf-parse\index.js`
2. æ‰¾åˆ°ç¬¬ 6 è¡Œï¼š`let isDebugMode = !module.parent;`
3. æ”¹ä¸ºï¼š`let isDebugMode = false;`
4. ä¿å­˜æ–‡ä»¶

---

## ğŸ”„ æ›´æ–°å’Œç»´æŠ¤

### æ›´æ–°ä¾èµ–
```bash
# æ›´æ–°åç«¯ä¾èµ–
cd server
npm update

# æ›´æ–°å‰ç«¯ä¾èµ–
cd ..\client
npm update
```

### å¤‡ä»½æ•°æ®
å®šæœŸå¤‡ä»½ä»¥ä¸‹æ–‡ä»¶å’Œç›®å½•ï¼š
- `server\.env` - é…ç½®æ–‡ä»¶
- `document\` - ä¸Šä¼ çš„å‘ç¥¨æ–‡æ¡£
- `metadata.json` - æ–‡ä»¶å…ƒæ•°æ®
- `settings.json` - ç³»ç»Ÿè®¾ç½®

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼š
1. æ£€æŸ¥æœ¬æ–‡æ¡£çš„"å¸¸è§é—®é¢˜"éƒ¨åˆ†
2. æŸ¥çœ‹ `README.md` è·å–æ›´å¤šä¿¡æ¯
3. æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯æ—¥å¿—

---

## ğŸ“„ è®¸å¯è¯

MIT License

---

**å®‰è£…æ—¥æœŸï¼š** 2025-11-05
**ç‰ˆæœ¬ï¼š** 1.0.0
